---
import { getCollection } from "astro:content";

import { ProjectCard } from "./_components/project-card";

import { Grid, Section } from "~/components/ui";
import Layout from "~/components/ui/layout.astro";
import { generateStaticPaths, getTranslations } from "~/lib";

export const getStaticPaths = generateStaticPaths;

const lang = Astro.params.lang;
const t = getTranslations(lang);

const projects = await getCollection(
	"projects",
	(pr) => pr.slug.startsWith(`${lang}/`) && pr.data.draft === false,
);
---

<Layout title={t("navLink.work")}>
	<Section className="h-auto lg:h-auto">
		<Grid stretch="width" className="mx-6 grid-cols-1 lg:grid-cols-3 lg:px-32">
			{
				projects.map((project) => (
					// the effect is working only on devices that support hover (have a mouse)
					<ProjectCard client:media="(hover:hover)" project={project} />
				))
			}
		</Grid>
	</Section>
</Layout>
