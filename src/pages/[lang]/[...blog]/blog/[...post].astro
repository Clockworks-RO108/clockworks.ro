---
import { type CollectionEntry, getCollection } from "astro:content";

import Layout from "~/components/ui/layout.astro";

export const getStaticPaths = async () => {
	const posts = await getCollection("blog", (post) => post.data.draft === false);

	return posts.map((post) => {
		const [lang, slug] = post.slug.split("/");

		return {
			params: { lang, post: slug },
			props: { post },
		};
	});
};

export type Props = {
	post: CollectionEntry<"blog">;
};

const { post } = Astro.props;
// const { lang } = Astro.params;
---

<Layout>
	<pre>{JSON.stringify(post.data, null, 2)}</pre>
</Layout>
